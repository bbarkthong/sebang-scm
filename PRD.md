# 세방산업 SCM 시스템 PRD (Product Requirements Document)

## 문서 정보

- **프로젝트명**: 세방산업 SCM (Supply Chain Management) 시스템
- **버전**: 1.0
- **작성일**: 2024년
- **작성자**: 개발팀
- **상태**: 개발 완료

---

## 1. 개요

### 1.1 프로젝트 배경
세방산업은 배터리 분리막 제조 기업으로, 삼성SDI, 현대자동차 등 주요 고객사와의 공급망 관리를 효율화하기 위해 통합 SCM 시스템이 필요합니다.

### 1.2 프로젝트 목표
- 발주부터 출하까지 전 과정의 디지털화
- 주문 처리 프로세스의 표준화 및 자동화
- 실시간 재고 및 주문 현황 파악
- 업무 효율성 향상 및 오류 감소

### 1.3 범위
- 주문 등록 및 관리
- 주문 승인 및 우선순위 관리
- 생산 완료 내역 창고 입고 관리
- 출하 계획 수립 및 관리
- 역할별 대시보드 제공

---

## 2. 사용자 및 역할

### 2.1 사용자 역할

#### 2.1.1 발주사 (Customer)
- **설명**: 주문을 발주하는 고객사 담당자
- **예시**: 삼성SDI, 현대자동차
- **권한**:
  - 주문 등록 및 조회
  - 본사 주문 현황 확인
  - 주문 상태 조회

#### 2.1.2 주문담당자 (Order Manager)
- **설명**: 세방산업의 주문 관리 담당자
- **권한**:
  - 주문 승인/거부
  - 우선순위 설정
  - 출하 계획 수립
  - 전체 주문 현황 관리

#### 2.1.3 제조담당자 (Manufacturing Manager)
- **설명**: 세방산업의 생산 및 입고 관리 담당자
- **권한**:
  - 생산 완료 내역 창고 입고 등록
  - 입고 내역 조회
  - 생산 주문 현황 확인

---

## 3. 기능 요구사항

### 3.1 주문 등록 (Order Registration)

#### 3.1.1 기능 설명
발주사가 새로운 주문을 등록하는 기능

#### 3.1.2 상세 요구사항
- **수동 주문 등록**
  - 주문번호: 자동 생성 (형식: ORD-YYYY-NNN, 예: ORD-2024-001)
  - 주문일자: 날짜 선택
  - 주문구분: 긴급/일반 선택
  - 고객사: 자동 입력 (로그인 사용자 회사명)
  - 주문 상세 항목 추가:
    - 품목코드 (필수)
    - 품목명 (필수)
    - 주문수량 (필수, 1 이상)
    - 단가 (필수, 0 이상)
    - 출하예정일 (선택)
  - 여러 항목 추가 가능
  - 등록 전 주문 상세 목록 확인 및 삭제 가능

- **엑셀 업로드 주문 등록**
  - 엑셀 템플릿 다운로드 제공
  - 템플릿 형식:
    - 필수 컬럼: 품목코드, 품목명, 주문수량, 단가
    - 선택 컬럼: 출하예정일
  - 엑셀 파일 업로드 및 파싱
  - 데이터 검증 및 오류 리포트 제공
  - 주문 마스터 정보 입력 후 일괄 등록

#### 3.1.3 비기능 요구사항
- 주문번호는 연도별로 자동 증가
- 데이터 검증 실패 시 명확한 오류 메시지 제공
- 엑셀 파일 크기 제한: 10MB 이하

#### 3.1.4 사용자 스토리
> **As a** 발주사  
> **I want to** 주문을 등록하고  
> **So that** 세방산업에 제품을 주문할 수 있다

---

### 3.2 주문 승인 (Order Approval)

#### 3.2.1 기능 설명
세방산업 주문담당자가 발주된 주문을 검토하고 승인/거부하는 기능

#### 3.2.2 상세 요구사항
- **주문 목록 조회**
  - 상태별 필터링 (전체/대기/승인/생산중/입고완료/출하완료)
  - 주문구분별 필터링 (전체/긴급/일반)
  - 주문번호 검색
  - 우선순위 및 주문일자 기준 정렬

- **주문 상세 확인**
  - 주문 마스터 정보 표시
  - 주문 상세 항목 목록 표시
  - 총 주문금액 계산 및 표시

- **주문 승인/거부**
  - 대기 상태 주문만 승인/거부 가능
  - 승인 시:
    - 우선순위 설정 (1~9 레벨, 기본값: 5)
    - 승인자 정보 기록
    - 승인일시 기록
    - 상태 변경: 대기 → 승인
  - 거부 시:
    - 상태 변경: 대기 → 거부
  - 승인된 주문은 생산중 상태로 변경 가능

#### 3.2.3 비기능 요구사항
- 긴급 주문은 우선적으로 표시
- 승인/거부 이력 추적 가능

#### 3.2.4 사용자 스토리
> **As a** 주문담당자  
> **I want to** 주문을 승인하고 우선순위를 설정하여  
> **So that** 생산 계획을 효율적으로 수립할 수 있다

---

### 3.3 입고 등록 (Warehouse Registration)

#### 3.3.1 기능 설명
제조담당자가 생산 완료된 제품을 창고에 입고 등록하는 기능

#### 3.3.2 상세 요구사항
- **입고 가능 주문 조회**
  - 승인 또는 생산중 상태의 주문만 표시
  - 우선순위 및 주문일자 기준 정렬

- **입고 등록**
  - 주문 선택
  - 주문 상세 항목별 입고 수량 입력
  - 입고일자 선택
  - 부분 입고 가능 (여러 번에 걸쳐 입고 가능)
  - 입고 수량은 주문 수량을 초과할 수 없음
  - 입고 완료 수량 및 잔량 표시

- **입고 완료 처리**
  - 모든 항목의 입고 수량이 주문 수량과 일치하면 자동으로 상태 변경: 생산중 → 입고완료

- **입고 내역 조회**
  - 주문별 입고 내역 표시
  - 입고일자, 수량, 입고자 정보 표시

#### 3.3.3 비기능 요구사항
- 입고 수량 실시간 검증
- 입고 이력 추적 가능

#### 3.3.4 사용자 스토리
> **As a** 제조담당자  
> **I want to** 생산 완료된 제품을 창고에 입고 등록하여  
> **So that** 재고를 관리하고 출하 준비를 할 수 있다

---

### 3.4 출하 계획 (Shipping Planning)

#### 3.4.1 기능 설명
주문담당자가 입고 완료된 재고를 확인하고 출하 계획을 수립하는 기능

#### 3.4.2 상세 요구사항
- **재고 현황 조회**
  - 입고 완료된 주문 목록 표시
  - 품목별 재고 현황:
    - 주문수량
    - 입고수량
    - 출하계획 수량
    - 출하완료 수량
    - 가용재고 (입고수량 - 출하계획 - 출하완료)

- **출하 계획 수립**
  - 주문 선택
  - 품목별 출하 수량 입력
  - 출하예정일 설정
  - 가용재고 범위 내에서만 출하 계획 가능
  - 부분 출하 계획 가능

- **출하 완료 처리**
  - 출하 계획 상태의 항목을 출하완료로 변경
  - 주문 상세의 출하 수량 및 출하일자 업데이트
  - 출하금액 자동 계산
  - 모든 항목 출하 완료 시 주문 상태 변경: 입고완료 → 출하완료

- **출하 계획 내역 조회**
  - 주문별 출하 계획 목록 표시
  - 출하예정일, 수량, 상태 정보 표시

#### 3.4.3 비기능 요구사항
- 가용재고 실시간 계산
- 출하 계획과 실제 출하 이력 추적 가능

#### 3.4.4 사용자 스토리
> **As a** 주문담당자  
> **I want to** 재고 현황을 확인하고 출하 계획을 수립하여  
> **So that** 고객사에 제품을 정시에 납품할 수 있다

---

### 3.5 대시보드 (Dashboard)

#### 3.5.1 기능 설명
역할별 주요 지표 및 현황을 확인하는 대시보드

#### 3.5.2 상세 요구사항

**발주사 대시보드**
- 전체 주문 수
- 상태별 주문 수 (대기/승인/완료)
- 최근 주문 목록 (최대 10개)
- 주문 상태별 통계

**주문담당자 대시보드**
- 전체 주문 통계 (전체/대기/승인/입고완료/출하완료)
- 긴급 주문 목록 (최대 10개)
- 승인 대기 주문 목록 (최대 10개)
- 출하 예정 계획 목록 (최대 10개)

**제조담당자 대시보드**
- 생산 대기 주문 수
- 생산 중 주문 수
- 생산 주문 목록 (최대 20개)
- 최근 입고 내역 (최대 10개)

**공통**
- 최근 활동 내역 (최대 5개)

#### 3.5.3 비기능 요구사항
- 실시간 데이터 반영
- 역할별 맞춤 정보 제공

#### 3.5.4 사용자 스토리
> **As a** 사용자  
> **I want to** 대시보드에서 주요 현황을 한눈에 확인하여  
> **So that** 업무를 효율적으로 관리할 수 있다

---

## 4. 데이터 모델

### 4.1 데이터베이스 스키마

#### 4.1.1 users (사용자)
| 컬럼명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| user_id | TEXT | PK | 사용자 ID |
| username | TEXT | UNIQUE, NOT NULL | 사용자명 |
| password_hash | TEXT | NOT NULL | 비밀번호 해시 |
| role | TEXT | NOT NULL | 역할 (발주사/주문담당자/제조담당자) |
| company_name | TEXT | NULL | 회사명 |
| created_at | DATETIME | NOT NULL | 생성일시 |

#### 4.1.2 order_master (주문 마스터)
| 컬럼명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| order_no | TEXT | PK | 주문번호 (ORD-YYYY-NNN) |
| order_date | DATE | NOT NULL | 주문일자 |
| order_type | TEXT | NOT NULL | 주문구분 (긴급/일반) |
| customer_company | TEXT | NOT NULL | 고객사 |
| status | TEXT | DEFAULT '대기' | 상태 (대기/승인/생산중/입고완료/출하완료) |
| priority | INTEGER | DEFAULT 5 | 우선순위 (1~9) |
| approved_by | TEXT | NULL | 승인자 |
| approved_at | DATETIME | NULL | 승인일시 |
| created_by | TEXT | NOT NULL | 등록자 |
| created_at | DATETIME | NOT NULL | 등록일시 |

#### 4.1.3 order_detail (주문 상세)
| 컬럼명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| order_no | TEXT | PK, FK | 주문번호 |
| order_seq | INTEGER | PK | 주문 순번 |
| item_code | TEXT | NOT NULL | 품목코드 |
| item_name | TEXT | NOT NULL | 품목명 |
| order_qty | INTEGER | NOT NULL | 주문수량 |
| unit_price | NUMERIC(10,2) | NOT NULL | 단가 |
| shipping_qty | INTEGER | DEFAULT 0 | 출하수량 |
| shipping_amount | NUMERIC(10,2) | DEFAULT 0 | 출하금액 |
| planned_shipping_date | DATE | NULL | 출하예정일 |
| actual_shipping_date | DATE | NULL | 출하일자 |

#### 4.1.4 warehouse (창고 입고)
| 컬럼명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| warehouse_id | INTEGER | PK, AUTO_INCREMENT | 입고 ID |
| order_no | TEXT | FK | 주문번호 |
| order_seq | INTEGER | NOT NULL | 주문 순번 |
| item_code | TEXT | NOT NULL | 품목코드 |
| item_name | TEXT | NOT NULL | 품목명 |
| received_qty | INTEGER | NOT NULL | 입고수량 |
| received_date | DATE | NOT NULL | 입고일자 |
| received_by | TEXT | NOT NULL | 입고자 |
| created_at | DATETIME | NOT NULL | 등록일시 |

#### 4.1.5 shipping_plan (출하 계획)
| 컬럼명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| plan_id | INTEGER | PK, AUTO_INCREMENT | 계획 ID |
| order_no | TEXT | FK | 주문번호 |
| order_seq | INTEGER | NOT NULL | 주문 순번 |
| planned_shipping_date | DATE | NOT NULL | 출하예정일 |
| planned_qty | INTEGER | NOT NULL | 출하수량 |
| status | TEXT | DEFAULT '계획' | 상태 (계획/출하완료) |
| created_by | TEXT | NOT NULL | 등록자 |
| created_at | DATETIME | NOT NULL | 등록일시 |

### 4.2 데이터 흐름

```
[발주사] 주문 등록
    ↓
[주문담당자] 주문 승인 + 우선순위 설정
    ↓
[제조담당자] 생산 완료 → 입고 등록
    ↓
[주문담당자] 재고 확인 → 출하 계획 수립
    ↓
[주문담당자] 출하 완료 처리
    ↓
[완료]
```

---

## 5. 기술 스택

### 5.1 프론트엔드
- **프레임워크**: Streamlit 1.28.0+
- **UI 컴포넌트**: Streamlit 기본 컴포넌트
- **스타일링**: 커스텀 CSS

### 5.2 백엔드
- **언어**: Python 3.12
- **프레임워크**: Streamlit
- **ORM**: SQLAlchemy 2.0+
- **데이터베이스**: SQLite (개발) / PostgreSQL (프로덕션 권장)

### 5.3 데이터 처리
- **엑셀 처리**: pandas 2.0+, openpyxl 3.1.0+
- **날짜 처리**: python-dateutil 2.8.0+

### 5.4 보안
- **인증**: 세션 기반 (Streamlit session_state)
- **비밀번호 해싱**: bcrypt 4.0.0+

### 5.5 테스트
- **테스트 프레임워크**: pytest 7.4.0+
- **커버리지**: pytest-cov 4.1.0+

---

## 6. 비기능 요구사항

### 6.1 성능
- 페이지 로딩 시간: 2초 이내
- 데이터베이스 쿼리 최적화
- 엑셀 파일 처리: 10MB 이하 파일 5초 이내 처리

### 6.2 보안
- 비밀번호 bcrypt 해싱
- SQL 인젝션 방지 (SQLAlchemy ORM 사용)
- 역할 기반 접근 제어 (RBAC)
- 입력 데이터 검증

### 6.3 사용성
- 직관적인 UI/UX
- 명확한 오류 메시지
- 반응형 레이아웃
- 역할별 맞춤 화면

### 6.4 호환성
- Python 3.12 이상
- 주요 웹 브라우저 지원 (Chrome, Firefox, Safari, Edge)
- 모바일 반응형 (선택사항)

### 6.5 확장성
- 다중 사용자 동시 접속 지원
- 데이터베이스 마이그레이션 지원
- API 연동 가능한 구조

---

## 7. 제약사항 및 가정

### 7.1 제약사항
- Streamlit 기반으로 인한 실시간 업데이트 제한
- SQLite 사용 시 동시성 제한 (프로덕션에서는 PostgreSQL 권장)
- 엑셀 파일 크기 제한: 10MB

### 7.2 가정
- 사용자는 기본적인 웹 브라우저 사용 능력 보유
- 네트워크 연결이 안정적임
- 데이터 백업은 별도 시스템에서 관리

---

## 8. 우선순위

### 8.1 필수 기능 (Must Have)
1. 주문 등록 (수동 + 엑셀 업로드)
2. 주문 승인 및 우선순위 설정
3. 입고 등록
4. 출하 계획 수립
5. 역할별 대시보드
6. 사용자 인증 및 권한 관리

### 8.2 중요 기능 (Should Have)
1. 주문번호 자동 생성
2. 엑셀 템플릿 다운로드
3. 주문 상태별 필터링 및 검색
4. 입고/출하 이력 조회

### 8.3 선택 기능 (Nice to Have)
1. 알림 시스템 (이메일/문자)
2. 보고서 생성 (PDF)
3. API 연동
4. 실시간 알림
5. 다국어 지원

---

## 9. 성공 지표 (KPI)

### 9.1 효율성 지표
- 주문 처리 시간 단축: 50% 이상
- 수동 입력 오류 감소: 80% 이상
- 주문 승인 대기 시간 단축: 30% 이상

### 9.2 사용성 지표
- 사용자 만족도: 4.0/5.0 이상
- 시스템 가동률: 99% 이상
- 오류 발생률: 1% 이하

### 9.3 비즈니스 지표
- 주문 처리량 증가
- 재고 관리 정확도 향상
- 출하 지연 감소

---

## 10. 향후 개선 사항

### 10.1 단기 (3개월)
- 알림 시스템 추가
- 보고서 생성 기능
- 모바일 최적화

### 10.2 중기 (6개월)
- API 연동
- 외부 시스템 연동 (ERP 등)
- 고급 분석 기능

### 10.3 장기 (1년)
- AI 기반 수요 예측
- 자동 재고 관리
- 다국어 지원

---

## 11. 부록

### 11.1 용어 정의
- **SCM**: Supply Chain Management (공급망 관리)
- **주문 마스터**: 주문의 기본 정보
- **주문 상세**: 주문에 포함된 품목별 정보
- **입고**: 생산 완료된 제품을 창고에 등록하는 과정
- **출하**: 창고에서 고객사로 제품을 보내는 과정

### 11.2 참고 문서
- Streamlit 공식 문서: https://docs.streamlit.io/
- SQLAlchemy 공식 문서: https://docs.sqlalchemy.org/
- 프로젝트 README.md
- 테스트 가이드 (tests/README.md)

### 11.3 연락처
- 프로젝트 관리자: [연락처 정보]
- 기술 지원: [연락처 정보]

---

**문서 버전**: 1.0  
**최종 수정일**: 2024년  
**승인자**: [승인자 정보]

